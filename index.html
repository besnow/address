<!DOCTYPE html>
<html lang="zh-CN" id="bgimg">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>最新地址发布</title>
    <meta name="description" content="最新地址发布">
    <meta name="keywords" content="最新地址发布">
    <link rel="shortcut icon" href="favicon.ico" />
    
    <!-- 保持原有的外部样式表链接 -->
    <link rel="stylesheet" type="text/css" href="https://www.bootcss.com/p/buttons/css/buttons.css">
    <link rel="stylesheet" type="text/css" href="https://www.bootcss.com/p/buttons/css/showcase.css">
    <link rel="stylesheet" href="style.css" />
    <meta name="referrer" content="no-referrer" />
</head>
<body>
    <div id="top">
        <main id="top_main">
            <div id="top_logo">
                <img src="src/tx.png" alt="主图标" id="mainimg">
            </div>
            <div id="top_title">
                <!-- 添加类名或内联样式以缩小图片 -->
                <img src="src/logo09.png" alt="网站标题" id="logoTitle">
            </div>

            <div class="showcase-examples l-over l-center">
                <a href="https://www.besnow.org" title="官方网站" class="button button-rounded button-plain button-small-caps button-border" target="_blank" rel="noopener noreferrer">官方网站</a>
                <a href="https://besnow.me" title="国内入口1" class="button random-domain button-rounded button-plain button-small-caps button-border" target="_blank" rel="noopener noreferrer">国内入口1</a>
                <a href="https://besnow.us" title="国内入口2" class="button random-domain button-rounded button-plain button-small-caps button-border" target="_blank" rel="noopener noreferrer">国内入口2</a>
                <a href="https://t.me/Besnow_L" title="官方群组" class="button button-rounded button-plain button-small-caps button-border" target="_blank" rel="noopener noreferrer">官方群组</a>
                <a href="https://t.me/Besnow_Cloud" title="公告频道" class="button button-rounded button-plain button-small-caps button-border" target="_blank" rel="noopener noreferrer">公告频道</a>
            </div>
        </main>
    </div>
    <footer id="top_footer">
        <hr class="top_hr_style02">
        <span id="top_copyright">
            <a href="https://www.besnow.org">&nbsp;贝雪云</a>&nbsp;请 Ctrl+D 收藏本地址发布页
        </span>
    </footer>

    <!-- 优化后的JavaScript -->

    <!-- 使用事件监听器替代内联事件 -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mainImg = document.getElementById('mainimg');
            mainImg.addEventListener('mouseover', () => {
                mainImg.src = "src/tx2.png"; // 鼠标悬浮时的图标
            });
            mainImg.addEventListener('mouseout', () => {
                mainImg.src = "src/tx.png"; // 默认图标
            });
        });
    </script>

    <script>
        // 优化背景切换函数
        function changeBackground() {
            const bodyBgs = [
                "https://s2.loli.net/2022/05/16/yOe4djW31gwKhqn.png",
                "https://s2.loli.net/2022/04/17/caNv2CEpfjVrmL7.jpg"
            ];

            const randomBg = bodyBgs[Math.floor(Math.random() * bodyBgs.length)];
            document.getElementById('bgimg').style.backgroundImage = `url(${randomBg})`;
        }

        // 使用 setInterval 代替递归的 setTimeout
        setInterval(changeBackground, 10000);
        // 初始化背景
        changeBackground();
    </script>

    <!-- 引入雪花效果脚本，确保路径正确 -->
    <script src="src/snow.min.js" defer></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof createSnow === 'function') {
                createSnow('src/', 60);
            }
        });
    </script>

    <script>
        (function() {
            const domains = ['besnow.me', 'besnow.us'];

            // 使用 Fisher-Yates 算法实现洗牌
            function shuffle(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }

            // 生成随机三级域名
            function randomDomain() {
                const domain = domains[Math.floor(Math.random() * domains.length)];
                const subdomains = [
                    'fast', 'slow', 'happy', 'sad', 'angry', 'calm', 'bright', 'dark', 'big', 'small',
                    'cabbage', 'spinach', 'cauliflower', 'carrot', 'eggplant', 'garlic', 'celery', 'radish',
                    'broccoli', 'onion', 'leek', 'pepper', 'mushroom', 'pumpkin', 'bean', 'tomato',
                    'cucumber', 'potato', 'lettuce', 'pea', 'corn', 'squash', 'zucchini', 'asparagus',
                    'beet', 'turnip', 'parsnip', 'artichoke', 'avocado', 'mango', 'banana', 'orange',
                    'lemon', 'lime', 'grapefruit', 'strawberry', 'blueberry', 'raspberry', 'blackberry',
                    'cherry', 'peach', 'plum', 'apricot', 'grape', 'kiwi', 'pineapple', 'pear', 'melon',
                    'watermelon', 'cantaloupe', 'honeydew', 'apple', 'dragonfruit', 'passionfruit',
                    'pomegranate', 'lychee', 'papaya', 'guava', 'fig', 'date', 'coconut', 'almond', 'walnut',
                    'peanut', 'cashew', 'pistachio', 'hazelnut', 'macadamia', 'pecan', 'brazilnut',
                    'pine', 'oak', 'maple', 'birch', 'spruce', 'cedar', 'willow', 'ash', 'beech', 'elm'
                ];

                const numSubdomains = Math.floor(Math.random() * 3) + 1;
                let selectedSubdomains = [];
                for (let i = 0; i < numSubdomains; i++) {
                    const randomIndex = Math.floor(Math.random() * subdomains.length);
                    selectedSubdomains.push(subdomains[randomIndex]);
                }

                if (Math.random() < 0.3) {
                    selectedSubdomains.push(Math.floor(Math.random() * 100));
                }

                shuffle(selectedSubdomains);
                const subdomain = selectedSubdomains.join(''); // 直接连接子域名

                return `${subdomain}.${domain}`;
            }

            // 替换链接中的域名，仅替换具有特定类的链接
            const links = document.querySelectorAll('a.random-domain');
            links.forEach(link => {
                const href = link.getAttribute('href');
                if (href.includes('besnow.me') || href.includes('besnow.us')) {
                    const newDomain = randomDomain();
                    const newHref = href.replace(/(besnow\.me|besnow\.us)/, newDomain);
                    link.setAttribute('href', newHref);
                }
            });
        })();
    </script>

    <!-- 添加样式以缩小 logo09.png 图片 -->
    <style>
        /* 确保在 style.css 中添加以下样式，或在此处直接添加 */
        #logoTitle {
            width: 50%;
            height: auto; /* 保持纵横比 */
        }
    </style>
</body>
</html>

